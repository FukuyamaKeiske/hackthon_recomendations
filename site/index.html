<!DOCTYPE html>
<!--  This site was created in Webflow. https://webflow.com  --><!--  Last Published: Sun Mar 30 2025 08:25:30 GMT+0000 (Coordinated Universal Time)  -->
<html
  data-wf-page="671f76e96bfdc9d3190d7180"
  data-wf-site="671f76e96bfdc9d3190d7125"
  lang="en"
>
  <head>
    <meta charset="utf-8" />
    <title>Image Trails</title>
    <meta
      content="In this video we will explore creating a mouse follow trail effect with images. We&#x27;ll use p5.js for our code and I&#x27;ll show you how to load it up in Webflow to use as a cool hero section too!"
      name="description"
    />
    <meta content="Image Trails" property="og:title" />
    <meta
      content="In this video we will explore creating a mouse follow trail effect with images. We&#x27;ll use p5.js for our code and I&#x27;ll show you how to load it up in Webflow to use as a cool hero section too!"
      property="og:description"
    />
    <meta
      content="https://uploads-ssl.webflow.com/649cd036c3448ae14ea25a03/649ce54e102d9c07f5a87080_image%20trail%20thumb.png"
      property="og:image"
    />
    <meta content="Image Trails" property="twitter:title" />
    <meta
      content="In this video we will explore creating a mouse follow trail effect with images. We&#x27;ll use p5.js for our code and I&#x27;ll show you how to load it up in Webflow to use as a cool hero section too!"
      property="twitter:description"
    />
    <meta
      content="https://uploads-ssl.webflow.com/649cd036c3448ae14ea25a03/649ce54e102d9c07f5a87080_image%20trail%20thumb.png"
      property="twitter:image"
    />
    <meta property="og:type" content="website" />
    <meta content="summary_large_image" name="twitter:card" />
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta content="Webflow" name="generator" />
    <link href="css/normalize.css" rel="stylesheet" type="text/css" />
    <link href="css/webflow.css" rel="stylesheet" type="text/css" />
    <link
      href="css/tests-fabulous-site-d7898a.webflow.css"
      rel="stylesheet"
      type="text/css"
    />
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link
      href="https://fonts.gstatic.com"
      rel="preconnect"
      crossorigin="anonymous"
    />
    <script
      src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"
      type="text/javascript"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script type="text/javascript">
      WebFont.load({
        google: {
          families: [
            "Open Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic",
          ],
        },
      });
    </script>
    <script type="text/javascript">
      !(function (o, c) {
        var n = c.documentElement,
          t = " w-mod-";
        (n.className += t + "js"),
          ("ontouchstart" in o ||
            (o.DocumentTouch && c instanceof DocumentTouch)) &&
            (n.className += t + "touch");
      })(window, document);
    </script>
    <link href="images/favicon.png" rel="shortcut icon" type="image/x-icon" />
    <link href="images/webclip.png" rel="apple-touch-icon" />
  </head>
  <body class="body">
    <div class="bodyblock">
      <div class="cont">
        <div class="searchblock">
          <div class="headerblock">
            <div class="text-40">Поиск аккаунта</div>
          </div>
          <div class="form-style"></div>
          <div class="form-block w-form">
            <form
              id="wf-form-Name-Form"
              name="wf-form-Name-Form"
              data-name="Name Form"
              method="get"
              class="form"
              data-wf-page-id="671f76e96bfdc9d3190d7180"
              data-wf-element-id="7cf4d4cc-dbcc-f47b-d53a-4dd5fba7be2e"
            >
              <div class="inputblock">
                <label for="Name" class="_16"
                  >Введите название аккаунта или ссылку </label
                ><input
                  class="input w-input"
                  maxlength="256"
                  name="Name"
                  data-name="Name"
                  placeholder="https://t.me/mts"
                  type="text"
                  id="Name"
                  required=""
                />
              </div>
              <div class="inputblock">
                <label for="keywords" class="_16"
                  >Уточните запрос, добавив ключевые слова</label
                ><input
                  class="input w-input"
                  maxlength="256"
                  name="name-2"
                  data-name="Name 2"
                  placeholder="Краснодар"
                  type="text"
                  id="keywords"
                />
              </div>
              <input
                type="submit"
                data-wait="Ищем аккаунты..."
                id="searchbtn"
                class="main-button w-button"
                value="Попробовать бесплатно"
              />
            </form>
            <div class="w-form-done">
              <div>Thank you! Your submission has been received!</div>
            </div>
            <div class="w-form-fail">
              <div>Oops! Something went wrong while submitting the form.</div>
            </div>
          </div>
          <div class="text">
            Ниже представлен список всех найденных страниц по вашему запросу.
            Чтобы увидеть больше информации — нажмите на интересующую страницу.
          </div>
        </div>
        <div class="rec">
          <div class="recblock">
            <div class="blockname">Связанные аккаунты</div>
            <div class="brand-group">
              <div class="groupname"></div>
              <div class="cardblock"></div>
            </div>
          </div>
          <div class="recblock">
            <div class="blockname">Похожие аккаунты</div>
            <div
              data-current="Tab 1"
              data-easing="ease"
              data-duration-in="300"
              data-duration-out="100"
              class="tabs w-tabs"
            >
              <div class="tabs-menu w-tab-menu">
                <a
                  data-w-tab="Tab 1"
                  class="tab w-inline-block w-tab-link w--current"
                >
                  <div>Конкуренты</div>
                </a>
                <a data-w-tab="Tab 2" class="tab w-inline-block w-tab-link">
                  <div>Инфлюенсеры</div>
                </a>
              </div>
              <div class="w-tab-content">
                <div data-w-tab="Tab 1" class="w-tab-pane w--tab-active">
                  <div class="brand-group">
                    <div class="groupname"></div>
                    <div class="cardblock"></div>
                  </div>
                  <div class="brand-group">
                    <div class="groupname"></div>
                    <div class="cardblock"></div>
                  </div>
                </div>
                <div data-w-tab="Tab 2" class="w-tab-pane"></div>
              </div>
            </div>
          </div>
          <a id="goprobtn" href="#" class="main-button w-button"
            >Получить рекомендации</a
          >
        </div>
        <div
          id="recsModal"
          style="
            display: none;
            position: fixed;
            top: 30%;
            left: 50%;
            transform: translate(-50%, -30%);
            background: #fff;
            padding: 20px;
            border: 1px solid #ccc;
            z-index: 1000;
          "
        >
          <h3>Выберите данные для получения рекомендаций</h3>
          <div>
            <label for="selectBusiness">Бизнес:</label>
            <select id="selectBusiness" style="width: 100%">
              <!-- Опции будут заполнены динамически -->
            </select>
          </div>
          <div style="margin-top: 10px">
            <label for="selectCompetitor">Конкурент:</label>
            <select id="selectCompetitor" style="width: 100%">
              <!-- Опции будут заполнены динамически -->
            </select>
          </div>
          <div style="margin-top: 15px; text-align: right">
            <button id="cancelRecs">Отмена</button>
            <button id="confirmRecs">ОК</button>
          </div>
        </div>
        <!-- Блок для вывода результата рекомендаций -->
        <div id="recommendationsResult" style="margin-top: 15px"></div>
      </div>
    </div>
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      type="text/javascript"
    ></script>
    <script>
      var businessData = [];
      var competitorData = [];
      $(document).ready(function () {
        $("#wf-form-Name-Form").on("submit", function (e) {
          e.preventDefault();
          var brand = $("#Name").val().trim();
          var keywords = $("#keywords").val().trim(); // Формируем URL для запроса /api/search/
          var searchUrl =
            "http://localhost:8000/api/search/?brand=" +
            encodeURIComponent(brand);
          if (keywords) {
            searchUrl += "&keywords=" + encodeURIComponent(keywords);
          } // Запрос к /api/search/ для заполнения карточек "Связанные аккаунты"

          $.get(searchUrl, function (response) {
            // Меняем заголовок первой группы карточек

            $(".brand-group:first .groupname").text(brand); // Контейнер, где выводятся карточки "Связанные аккаунты"

            var cardsContainer = $(".brand-group:first .cardblock");
            cardsContainer.empty();
            if (response.match && response.match.length) {
              businessData = response.match; // Сохраняем данные для дальнейшего использования
              response.match.forEach(function (item, index) {
                // Формируем изображение: если в ссылке содержится "t.me" – Tg.png, иначе Yb.png
                var imgSrc =
                  item.url.indexOf("t.me") !== -1
                    ? "images/Tg.png"
                    : "images/Yb.png";
                var card = $("<a>", {
                  href: item.url,
                  class: "card w-inline-block",
                  "data-index": index, // сохраняем индекс для выбора в будущих операциях
                });
                var avatarDiv = $("<div>", {
                  class: "avatar",
                });
                var avatarImg = $("<img>", {
                  src: item.image,
                  loading: "lazy",
                  width: 64,
                  height: 64,
                  alt: "",
                  class: "brand-avatar",
                });
                avatarDiv.append(avatarImg);
                var aboutDiv = $("<div>", {
                  class: "about",
                });
                var infoText = $("<div>", {
                  class: "infotext",
                });
                var brandName = $("<div>", {
                  class: "brand-name",
                  text: item.name,
                });
                var brandSubs = $("<div>", {
                  class: "brand-subs",
                  text: item.subscribers + " подписчиков",
                });
                infoText.append(brandName).append(brandSubs);
                var linkStyle = $("<div>", {
                  class: "link-style",
                });
                var iconDiv = $("<div>", {
                  class: "icon",
                });
                var iconImg = $("<img>", {
                  src: imgSrc,
                  loading: "lazy",
                  width: 20,
                  height: 20,
                  alt: "",
                  class: "brand-avatar",
                });
                iconDiv.append(iconImg);
                var usernameDiv = $("<div>", {
                  class: "username",
                  text: item.name.toLowerCase(),
                });
                linkStyle.append(iconDiv).append(usernameDiv);
                aboutDiv.append(infoText).append(linkStyle);
                card.append(avatarDiv).append(aboutDiv);
                cardsContainer.append(card);
              });
            } else {
              cardsContainer.append(
                $("<div>", {
                  text: response.message || "Нет данных для отображения",
                })
              );
            } // После успешного выполнения первого запроса – запускаем второй запрос к /api/rivals/
            var rivalsUrl =
              "http://localhost:8000/api/rivals/?brand=" +
              encodeURIComponent(brand);
            if (keywords) {
              rivalsUrl += "&keywords=" + encodeURIComponent(keywords);
            }
            $.get(rivalsUrl, function (rivals_response) {
              // Контейнер для карточек "Конкуренты" в первом табе (data-w-tab="Tab 1")
              var rivalsContainer = $(
                '.w-tab-pane[data-w-tab="Tab 1"] .brand-group:first .cardblock'
              );
              rivalsContainer.empty();
              if (rivals_response.rivals && rivals_response.rivals.length) {
                competitorData = rivals_response.rivals; // Сохраняем данные конкурентов для рекомендаций
                rivals_response.rivals.forEach(function (item, index) {
                  var imgSrc =
                    item.url.indexOf("t.me") !== -1
                      ? "images/Tg.png"
                      : "images/Yb.png";
                  var card = $("<a>", {
                    href: item.url,
                    class: "card w-inline-block",
                    "data-index": index, // сохраняем индекс
                  });
                  var avatarDiv = $("<div>", {
                    class: "avatar",
                  });
                  var avatarImg = $("<img>", {
                    src: item.image,
                    loading: "lazy",
                    width: 64,
                    height: 64,
                    alt: "",
                    class: "brand-avatar",
                  });
                  avatarDiv.append(avatarImg);
                  var aboutDiv = $("<div>", {
                    class: "about",
                  });
                  var infoText = $("<div>", {
                    class: "infotext",
                  });
                  var brandName = $("<div>", {
                    class: "brand-name",
                    text: item.name,
                  });
                  var brandSubs = $("<div>", {
                    class: "brand-subs",
                    text: item.subscribers + " подписчиков",
                  });
                  infoText.append(brandName).append(brandSubs);
                  var linkStyle = $("<div>", {
                    class: "link-style",
                  });
                  var iconDiv = $("<div>", {
                    class: "icon",
                  });
                  var iconImg = $("<img>", {
                    src: imgSrc,
                    loading: "lazy",
                    width: 20,
                    height: 20,
                    alt: "",
                    class: "brand-avatar",
                  });
                  iconDiv.append(iconImg);
                  var usernameDiv = $("<div>", {
                    class: "username",
                    text: item.name.toLowerCase(),
                  });
                  linkStyle.append(iconDiv).append(usernameDiv);
                  aboutDiv.append(infoText).append(linkStyle);
                  card.append(avatarDiv).append(aboutDiv);
                  rivalsContainer.append(card);
                });
              } else {
                rivalsContainer.append(
                  $("<div>", {
                    text:
                      rivals_response.message || "Нет данных для отображения",
                  })
                );
              }
            });
          });
        }); // По нажатию на кнопку "Получить рекомендации" показываем модальное окно для выбора данных
        $("#goprobtn").on("click", function (e) {
          e.preventDefault(); // Проверяем, что у нас есть данные для выбора
          if (businessData.length === 0 || competitorData.length === 0) {
            alert(
              "Для формирования рекомендаций необходимо сначала выполнить поиск и дождаться загрузки всех данных."
            );
            return;
          } // Заполняем селект для бизнеса
          var selectBusiness = $("#selectBusiness");
          selectBusiness.empty();
          businessData.forEach(function (item, index) {
            // Вариант: используем name как отображаемый текст. Можно добавить id/index через data-attribute.
            selectBusiness.append(
              $("<option>", {
                value: index,
                text: item.name,
              })
            );
          }); // Заполняем селект для конкурентов
          var selectCompetitor = $("#selectCompetitor");
          selectCompetitor.empty();
          competitorData.forEach(function (item, index) {
            selectCompetitor.append(
              $("<option>", {
                value: index,
                text: item.name,
              })
            );
          }); // Показываем модальное окно
          $("#recsModal").show();
        }); // Обработчик кнопки отмены в модальном окне
        $("#cancelRecs").on("click", function () {
          $("#recsModal").hide();
        }); // Обработчик подтверждения выбора (нажата кнопка "ОК" в модальном окне)
        $("#confirmRecs").on("click", function () {
          // Получаем выбранные индексы
          var businessIndex = $("#selectBusiness").val();
          var competitorIndex = $("#selectCompetitor").val(); // Извлекаем соответствующие объекты (BrandInfo). При необходимости можно добавить недостающие поля
          var data1 = businessData[businessIndex];
          var data2 = competitorData[competitorIndex]; // Формируем данные для запроса. Если каких-то полей не хватает, можно добавить их как пустые строки.
          var postData = {
            data1: {
              name: data1.name || "",
              description: data1.description || "",
              url: data1.url || "",
              image: data1.image || "",
              subscribers: data1.subscribers || 0,
              adress: data1.adress || "",
              type: data1.type || "",
              size: data1.size || "",
              keywords: data1.keywords || [],
            },
            data2: {
              name: data2.name || "",
              description: data2.description || "",
              url: data2.url || "",
              image: data2.image || "",
              subscribers: data2.subscribers || 0,
              adress: data2.adress || "",
              type: data2.type || "",
              size: data2.size || "",
              keywords: data2.keywords || [],
            },
          }; // Скрываем модальное окно
          $("#recsModal").hide(); // Отправляем POST-запрос к /api/generate_recomendations/
          $.ajax({
            url: "http://localhost:8000/api/generate_recomendations/",
            method: "POST",
            contentType: "application/json",
            data: JSON.stringify(postData),
            success: function (response) {
              var html = marked.parse(response);
              $("#recommendationsResult").html("<div>" + html + "</div>");
            },
            error: function (xhr, status, error) {
              $("#recommendationsResult").html(
                "<div>Ошибка при получении рекомендаций: " + error + "</div>"
              );
            },
          });
        });
      });
    </script>
    <script src="js/webflow.js" type="text/javascript"></script>
  </body>
</html>
